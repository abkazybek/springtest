<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
  ~ Copyright (c) 2022 LTD Haulmont Samara. All Rights Reserved.
  ~ Haulmont Samara proprietary and confidential.
  ~ Use is subject to license terms.
  -->

<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        xmlns:thesis="http://schemas.haulmont.com/thesis/thesis-window.xsd"
        class="com.company.thesissummer.web.ui.orderdocumentfull1c.OrderDocumentFull1CEdit"
        messagesPack="com.company.thesissummer.web.ui.orderdocumentfull1c"
        caption="msg://editCaption"
        datasource="cardDs">
    <dsContext>
        <datasource id="cardDs"
                    class="com.company.thesissummer.entity.OrderDocumentFull1C"
                    view="edit">
            <collectionDatasource id="cardProcDs" property="procs"/>
            <collectionDatasource id="cardRolesDs" property="roles"/>
        </datasource>
        <hierarchicalDatasource id="attachmentsDs" class="com.haulmont.workflow.core.entity.CardAttachment"
                                datasourceClass="com.haulmont.thesis.web.ui.common.attachments.ThesisAttachmentsDataSource"
                                view="card-edit" hierarchyProperty="versionOf">
            <query>
                <![CDATA[select a from wf$CardAttachment a where a.card.id = :ds$cardDs order by a.createTs desc]]></query>
        </hierarchicalDatasource>
        <collectionDatasource id="cardRelationsDs" class="com.haulmont.workflow.core.entity.CardRelation"
                              view="card-relation">
            <query>
                <![CDATA[select c from wf$CardRelation c where (c.card.id = :ds$cardDs or c.relatedCard.id = :ds$cardDs)]]></query>
        </collectionDatasource>
    </dsContext>
    <assign name="width" value="theme://thesis.gui.editor-fields.width"/>
    <assign name="small_width" value="180px"/>
    <assign name="textAreaHeight" value="176px"/>
    <assign name="rightPanelWidth" value="theme://thesis.edit-actions-pane.button-width"/>
    <assign name="rightPanelBoxWidth" value="theme://thesis.edit-actions-pane.width"/>
    <layout expand="mainPane">
        <hbox id="mainPane" stylename="no-window-padding-right" expand="tabsheet" width="100%">
            <tabSheet id="tabsheet" height="100%">
                <tab id="mainTab" caption="msg://mainTab">
                    <groupBox id="cardInfoGroupBox" stylename="edit-area" height="100%" width="100%">
                        <scrollBox id="infoScrollBox" scrollBars="both" height="100%" contentWidth="100%">
                            <vbox id="cardHeaderHolder" width="100%"/>
                            <vbox id="infoVBox" width="AUTO">
                                <hbox id="mainGridBox" stylename="thesis-main-grid-box">
                                    <grid id="leftGrid" spacing="true" margin="true, true, false, false">
                                        <columns>
                                            <column flex="1"/>
                                        </columns>
                                        <rows>
                                            <row id="numberRow">
                                                <textField id="number" property="number" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.number"/>
                                            </row>
                                            <row id="zaemchikRow">
                                                <textField id="zaemchik" property="zaemchik" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.zaemchik"/>
                                            </row>
                                            <row id="binRow">
                                                <textField id="bin" property="bin" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.bin"/>
                                            </row>
                                            <row id="zalogodatelRow">
                                                <textField id="zalogodatel" property="zalogodatel" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.zalogodatel"/>
                                            </row>
                                            <row id="naimenovanieZaemchikaRow">
                                                <textField id="naimenovanieZaemchika" property="naimenovanieZaemchika"
                                                           datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.naimenovanieZaemchika"/>
                                            </row>
                                            <row id="naimenovanieZalogodatelyaRow">
                                                <textField id="naimenovanieZalogodatelya"
                                                           property="naimenovanieZalogodatelya" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.naimenovanieZalogodatelya"/>
                                            </row>
                                            <row id="dogovorSvyazanniSObespecheniemRow">
                                                <textField id="dogovorSvyazanniSObespecheniem"
                                                           property="dogovorSvyazanniSObespecheniem" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.dogovorSvyazanniSObespecheniem"/>
                                            </row>
                                            <row id="predmetRow">
                                                <textField id="predmet" property="predmet" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.predmet"/>
                                            </row>
                                            <row id="tekushayaStoimostRow">
                                                <textField id="tekushayaStoimost" property="tekushayaStoimost"
                                                           datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.tekushayaStoimost"/>
                                            </row>
                                            <row id="pereocenStoimostRow">
                                                <textField id="pereocenStoimost" property="pereocenStoimost"
                                                           datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.pereocenStoimost"/>
                                            </row>
                                            <row id="obespechenieRow">
                                                <textField id="obespechenie" property="obespechenie" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.obespechenie"/>
                                            </row>
                                            <row id="zalogovayaStoimostRow">
                                                <textField id="zalogovayaStoimost" property="zalogovayaStoimost"
                                                           datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.zalogovayaStoimost"/>
                                            </row>
                                        </rows>
                                    </grid>
                                    <vbox id="gridSeparator" stylename="grid-separator" height="100%" width="1px"/>
                                    <grid id="rightGrid" spacing="true" margin="true, false, false, true">
                                        <columns>
                                            <column flex="1"/>
                                        </columns>
                                        <rows>
                                            <row id="itogSummaKSpisaniyuRow">
                                                <textField id="itogSummaKSpisaniyu" property="itogSummaKSpisaniyu"
                                                           datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.itogSummaKSpisaniyu"/>
                                            </row>
                                            <row id="datapereocenRow">
                                                <textField id="datapereocen" property="datapereocen" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.datapereocen"/>
                                            </row>
                                            <row id="osnovaniyeRow">
                                                <textField id="osnovaniye" property="osnovaniye" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.osnovaniye"/>
                                            </row>
                                            <row id="documentUsloviyRow">
                                                <textField id="documentUsloviy" property="documentUsloviy"
                                                           datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.documentUsloviy"/>
                                            </row>
                                            <row id="iinRow">
                                                <textField id="iin" property="iin" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.iin"/>
                                            </row>
                                            <row id="nomerAndDataRow">
                                                <textField id="nomerAndData" property="nomerAndData" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.nomerAndData"/>
                                            </row>
                                            <row id="summaSubsidiDlyaPerechRow">
                                                <textField id="summaSubsidiDlyaPerech" property="summaSubsidiDlyaPerech"
                                                           datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.summaSubsidiDlyaPerech"/>
                                            </row>
                                            <row id="otkoneniyePoSummeSubsidiyRow">
                                                <textField id="otkoneniyePoSummeSubsidiy"
                                                           property="otkoneniyePoSummeSubsidiy" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.otkoneniyePoSummeSubsidiy"/>
                                            </row>
                                            <row id="iikZaemchikaRow">
                                                <textField id="iikZaemchika" property="iikZaemchika" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.iikZaemchika"/>
                                            </row>
                                            <row id="bankRow">
                                                <textField id="bank" property="bank" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.bank"/>
                                            </row>
                                            <row id="poyasnenieRow">
                                                <textField id="poyasnenie" property="poyasnenie" datasource="cardDs"
                                                           width="theme://thesis.gui.editor-fields.width"
                                                           caption="msg://com.company.thesissummer.entity/OrderDocumentFull1C.poyasnenie"/>
                                            </row>
                                            <row id="signatureAndAttachmentRow">
                                                <vbox id="signatureAndAttachmentMainBox">
                                                    <vbox id="attachmentMainBox"
                                                          margin="true, false, false, false">
                                                        <label id="attachmentLabel"
                                                               value="msg://attachments"
                                                               stylename="label-like-caption"/>
                                                        <grid id="attachmentInfo"
                                                              spacing="true"
                                                              width="${width}">
                                                            <columns>
                                                                <column flex="1"/>
                                                            </columns>
                                                            <rows>
                                                                <row id="attachmentRow">
                                                                    <vbox id="attachmentBox" height="100%">
                                                                    </vbox>
                                                                </row>
                                                            </rows>
                                                        </grid>
                                                    </vbox>
                                                </vbox>
                                            </row>
                                        </rows>
                                    </grid>
                                </hbox>
                            </vbox>
                        </scrollBox>
                    </groupBox>
                </tab>
                <tab id="attachmentsTab" caption="msg://attachments">
                    <groupBox id="attachmentsTabGroupBox" stylename="edit-area"
                              height="100%" width="100%" expand="atdrop">
                        <hbox id="atdrop" width="100%" height="100%" margin="false,true,false,false">
                            <frame screen="cardAttachmentsFrame" id="cardAttachmentsFrame" height="100%"/>
                        </hbox>
                    </groupBox>
                </tab>
                <tab id="cardTreeTab" caption="msg://cardTreeTab">
                    <groupBox id="cardTreeTabGroupBox" stylename="edit-area"
                              height="100%" width="100%" expand="cardTreeFrameBox">
                        <vbox id="cardHeaderHolder" width="100%"/>
                        <vbox id="cardTreeFrameBox" width="100%" margin="false,true,false,false">
                            <frame id="cardTreeFrame" screen="cardTreeFrame" height="100%"/>
                        </vbox>
                    </groupBox>
                </tab>
                <tab id="resolutionsTab" caption="msg://resolutionsTab">
                    <groupBox id="resolutionsTabGroupBox" stylename="edit-area"
                              height="100%" width="100%" expand="resolutionsPane">
                        <vbox id="cardHeaderHolder" width="100%"/>
                        <vbox id="resolutionsPane" expand="resolutionsFrame" margin="false,true,false,false"
                              width="100%" spacing="true">
                            <frame id="resolutionsFrame" screen="resolutionsFrame"/>
                        </vbox>
                    </groupBox>
                </tab>
                <tab id="processTab" caption="msg://processTab">
                    <groupBox id="processTabGroupBox" stylename="edit-area"
                              height="100%" width="100%" expand="cardProcFrameBox">
                        <vbox id="cardHeaderHolder" width="100%"/>
                        <vbox id="cardProcFrameBox" margin="false,true,false,false">
                            <frame id="cardProcFrame" screen="cardProcFrame" height="100%"/>
                        </vbox>
                    </groupBox>
                </tab>
                <tab id="cardLogTab" caption="msg://cardLogTab" lazy="true">
                    <groupBox id="cardLogTabGroupBox" stylename="edit-area"
                              height="100%" width="100%" expand="cardLogFrameBox">
                        <vbox id="cardHeaderHolder" width="100%"/>
                        <vbox id="cardLogFrameBox" margin="false,true,false,false">
                            <frame id="cardLogFrame" screen="cardLogFrame" height="100%"/>
                        </vbox>
                    </groupBox>
                </tab>
                <tab id="securityTab" caption="msg://securityTab" lazy="true">
                    <groupBox id="securityTabGroupBox" stylename="edit-area"
                              height="100%" width="100%" expand="securityFrameBox">
                        <vbox id="cardHeaderHolder" width="100%"/>
                        <vbox id="securityFrameBox" margin="false,true,false,false">
                            <frame id="securityFrame" screen="securityFrame" height="100%"/>
                        </vbox>
                    </groupBox>
                </tab>
            </tabSheet>
            <scrollBox id="buttonsPane" stylename="t-right-buttons-panel" width="${rightPanelBoxWidth}" spacing="true"
                       height="100%">
                <vbox id="actionsPane" stylename="edit-area t-right-buttons-panel-container" width="${rightPanelWidth}">
                    <frame id="actionsFrame" screen="actionsFrame"/>
                </vbox>
                <frame id="startProcessButtonsFrame" screen="startProcessButtonsFrame" width="${rightPanelWidth}"
                       stylename="t-right-buttons-panel-container"/>
                <vbox id="otherActions" width="${rightPanelWidth}" spacing="true"
                      stylename="edit-area t-right-buttons-panel-container">
                    <button id="createFromPatternButton" caption="msg://createFromPattern" width="100%"/>
                    <popupButton id="createSubCardButton" width="100%"
                                 icon="ts-font-icon:PLUS" caption="msg://actions.Create"/>
                    <runReportPopupButton id="print"
                                          icon="ts-font-icon:PRINT" caption="msg://print"
                                          width="100%"/>
                    <button id="copyLinkButton" caption="msg://copyLink" width="100%"
                            icon="ts-font-icon:LINK"/>
                </vbox>
            </scrollBox>
        </hbox>
    </layout>
</window>
